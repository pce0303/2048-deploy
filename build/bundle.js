var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function f(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function u(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode&&t.parentNode.removeChild(t)}function i(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function s(t){return document.createElement(t)}function a(t){return document.createTextNode(t)}function d(){return a(" ")}function h(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}let p;function $(t){p=t}function g(t){(function(){if(!p)throw new Error("Function called outside component initialization");return p})().$$.on_mount.push(t)}const m=[],y=[];let b=[];const v=[],w=Promise.resolve();let _=!1;function x(t){b.push(t)}const k=new Set;let A=0;function E(){if(0!==A)return;const t=p;do{try{for(;A<m.length;){const t=m[A];A++,$(t),S(t.$$)}}catch(t){throw m.length=0,A=0,t}for($(null),m.length=0,A=0;y.length;)y.pop()();for(let t=0;t<b.length;t+=1){const n=b[t];k.has(n)||(k.add(n),n())}b.length=0}while(m.length);for(;v.length;)v.pop()();_=!1,k.clear(),$(t)}function S(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(x)}}const j=new Set;let C;function N(t,n){t&&t.i&&(j.delete(t),t.i(n))}function q(t,e,f,c){const{fragment:u,after_update:l}=t.$$;u&&u.m(e,f),c||x((()=>{const e=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),l.forEach(x)}function M(t,n){const e=t.$$;null!==e.fragment&&(!function(t){const n=[],e=[];b.forEach((o=>-1===t.indexOf(o)?n.push(o):e.push(o))),e.forEach((t=>t())),b=n}(e.after_update),o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function O(t,n){-1===t.$$.dirty[0]&&(m.push(t),_||(_=!0,w.then(E)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function F(n,r,f,c,u,i,s,a=[-1]){const d=p;$(n);const h=n.$$={fragment:null,ctx:[],props:i,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(r.context||(d?d.$$.context:[])),callbacks:e(),dirty:a,skip_bound:!1,root:r.target||d.$$.root};s&&s(h.root);let g=!1;if(h.ctx=f?f(n,r.props||{},((t,e,...o)=>{const r=o.length?o[0]:e;return h.ctx&&u(h.ctx[t],h.ctx[t]=r)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](r),g&&O(n,t)),e})):[],h.update(),g=!0,o(h.before_update),h.fragment=!!c&&c(h.ctx),r.target){if(r.hydrate){const t=function(t){return Array.from(t.childNodes)}(r.target);h.fragment&&h.fragment.l(t),t.forEach(l)}else h.fragment&&h.fragment.c();r.intro&&N(n.$$.fragment),q(n,r.target,r.anchor,r.customElement),E()}$(d)}class L{$destroy(){M(this,1),this.$destroy=t}$on(n,e){if(!r(e))return t;const o=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return o.push(e),()=>{const t=o.indexOf(e);-1!==t&&o.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function z(t,n,e){const o=t.slice();return o[10]=n[e],o[11]=n,o[12]=e,o}function B(t,n,e){const o=t.slice();return o[13]=n[e],o[14]=n,o[15]=e,o}function D(t){let n;return{c(){n=s("div"),n.textContent="Finish",h(n,"class","finish svelte-1qivfwl")},m(t,e){u(t,n,e)},d(t){t&&l(n)}}}function P(t){let n,e,o,r,f=t[13]+"",i=t[12],p=t[15];function $(){return t[3](t[13])}const g=()=>t[4](n,i,p),m=()=>t[4](null,i,p);return{c(){n=s("div"),e=a(f),o=d(),h(n,"class","cell svelte-1qivfwl"),h(n,"style",r=$)},m(t,r){u(t,n,r),c(n,e),c(n,o),g()},p(o,c){t=o,1&c&&f!==(f=t[13]+"")&&function(t,n){n=""+n,t.data!==n&&(t.data=n)}(e,f),1&c&&r!==(r=$)&&h(n,"style",r),i===t[12]&&p===t[15]||(m(),i=t[12],p=t[15],g())},d(t){t&&l(n),m()}}}function R(t){let n,e=t[10],o=[];for(let n=0;n<e.length;n+=1)o[n]=P(B(t,e,n));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();n=a("")},m(t,e){for(let n=0;n<o.length;n+=1)o[n]&&o[n].m(t,e);u(t,n,e)},p(t,r){if(1&r){let f;for(e=t[10],f=0;f<e.length;f+=1){const c=B(t,e,f);o[f]?o[f].p(c,r):(o[f]=P(c),o[f].c(),o[f].m(n.parentNode,n))}for(;f<o.length;f+=1)o[f].d(1);o.length=e.length}},d(t){i(o,t),t&&l(n)}}}function T(n){let e,o,r,f,a=n[1]&&D(),p=n[0],$=[];for(let t=0;t<p.length;t+=1)$[t]=R(z(n,p,t));return{c(){e=s("main"),a&&a.c(),o=d();for(let t=0;t<$.length;t+=1)$[t].c();h(e,"tabindex","0"),h(e,"class","svelte-1qivfwl")},m(t,l){u(t,e,l),a&&a.m(e,null),c(e,o);for(let t=0;t<$.length;t+=1)$[t]&&$[t].m(e,null);var i,s,d,h;r||(i=e,s="keydown",d=n[2],i.addEventListener(s,d,h),f=()=>i.removeEventListener(s,d,h),r=!0)},p(t,[n]){if(t[1]?a||(a=D(),a.c(),a.m(e,o)):a&&(a.d(1),a=null),1&n){let o;for(p=t[0],o=0;o<p.length;o+=1){const r=z(t,p,o);$[o]?$[o].p(r,n):($[o]=R(r),$[o].c(),$[o].m(e,null))}for(;o<$.length;o+=1)$[o].d(1);$.length=p.length}},i:t,o:t,d(t){t&&l(e),a&&a.d(),i($,t),r=!1,f()}}}function U(t,n){return t>=0&&t<4&&n>=0&&n<4}function G(t,n,e){let o=Array(4).fill().map((()=>Array(4).fill(0))),r=!1;function f(){const t=[];for(let n=0;n<4;n++)for(let e=0;e<4;e++)0===o[n][e]&&t.push({i:n,j:e});if(t.length>0){const{i:n,j:r}=t[Math.floor(Math.random()*t.length)];e(0,o[n][r]=Math.random()<.9?2:4,o)}else l()||e(1,r=!0)}function c(t){let n=!1;for(let e=0;e<4;e++)for(let r=0;r<4;r++)0!==o[e][r]&&("up"===t?n=u(e,r,-1,0)||n:"down"===t?n=u(e,r,1,0)||n:"left"===t?n=u(e,r,0,-1)||n:"right"===t&&(n=u(e,r,0,1)||n));return l()||e(1,r=!0),n}function u(t,n,r,f){let c=!1;for(;U(t+r,n+f)&&0===o[t+r][n+f];)e(0,o[t+r][n+f]=o[t][n],o),e(0,o[t][n]=0,o),t+=r,n+=f,c=!0;return U(t+r,n+f)&&o[t+r][n+f]===o[t][n]&&(e(0,o[t+r][n+f]*=2,o),e(0,o[t][n]=0,o),c=!0),c}function l(){for(let t=0;t<4;t++)for(let n=0;n<4;n++)if(U(t-1,n)&&o[t][n]===o[t-1][n]||U(t+1,n)&&o[t][n]===o[t+1][n]||U(t,n-1)&&o[t][n]===o[t][n-1]||U(t,n+1)&&o[t][n]===o[t][n+1])return!0;return!1}g((()=>{e(0,o=Array(4).fill().map((()=>Array(4).fill(0)))),e(1,r=!1),f()}));return[o,r,function(t){if(r)return void alert("Finish");let n=!1;"ArrowUp"===t.key||"w"===t.key?n=c("up"):"ArrowDown"===t.key||"s"===t.key?n=c("down"):"ArrowLeft"===t.key||"a"===t.key?n=c("left"):"ArrowRight"!==t.key&&"d"!==t.key||(n=c("right")),n&&f()},t=>{return{backgroundColor:{0:"#ccc",2:"#eee",4:"#dcdc9a",8:"#f2f088",16:"#f7c576",32:"#f8a365",64:"#f98c5e",128:"#fa7357",256:"#fb5a50",512:"#fc4150",1024:"#fd2a4f",2048:"#ff144f"}[n=t]||"#ff144f",color:{2:"#000",4:"#000",8:"#000",16:"#000",32:"#000",64:"#000",128:"#fff",256:"#fff",512:"#fff",1024:"#fff",2048:"#fff"}[n]||"#000"};var n},function(t,n,r){y[t?"unshift":"push"]((()=>{o[n][r]=t,e(0,o)}))}]}class H extends L{constructor(t){super(),F(this,t,G,T,f,{})}}function I(t){let n,e,o,r,f,i;function a(n){t[2](n)}let p={};return void 0!==t[0]&&(p.currentScore=t[0]),r=new H({props:p}),y.push((()=>function(t,n,e){const o=t.$$.props[n];void 0!==o&&(t.$$.bound[o]=e,e(t.$$.ctx[o]))}(r,"currentScore",a))),r.$on("updateScore",t[1]),{c(){var t;n=s("main"),e=s("h1"),e.textContent="2048",o=d(),(t=r.$$.fragment)&&t.c(),h(n,"class","svelte-177t831")},m(t,f){u(t,n,f),c(n,e),c(n,o),q(r,n,null),i=!0},p(t,[n]){const e={};var o;!f&&1&n&&(f=!0,e.currentScore=t[0],o=()=>f=!1,v.push(o)),r.$set(e)},i(t){i||(N(r.$$.fragment,t),i=!0)},o(t){!function(t,n,e,o){if(t&&t.o){if(j.has(t))return;j.add(t),C.c.push((()=>{j.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}else o&&o()}(r.$$.fragment,t),i=!1},d(t){t&&l(n),M(r)}}}function J(t,n,e){let o=0;return[o,function(){e(0,o+=10)},function(t){o=t,e(0,o)}]}return new class extends L{constructor(t){super(),F(this,t,J,I,f,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
